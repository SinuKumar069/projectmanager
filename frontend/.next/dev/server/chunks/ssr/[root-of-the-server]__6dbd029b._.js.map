{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/projectmanager/frontend/lib/api-client.ts"],"sourcesContent":["const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3000/api/v1'\r\n\r\ninterface ApiResponse<T = any> {\r\n  statusCode: number\r\n  data: T\r\n  message: string\r\n  success: boolean\r\n}\r\n\r\nclass ApiClient {\r\n  private baseURL: string\r\n\r\n  constructor(baseURL: string) {\r\n    this.baseURL = baseURL\r\n  }\r\n\r\n  private async request<T>(\r\n    endpoint: string,\r\n    options: RequestInit = {}\r\n  ): Promise<ApiResponse<T>> {\r\n    const token = typeof window !== 'undefined' ? localStorage.getItem('auth_token') : null\r\n    \r\n    const headers: HeadersInit = {\r\n      'Content-Type': 'application/json',\r\n      ...options.headers,\r\n    }\r\n\r\n    if (token) {\r\n      headers['Authorization'] = `Bearer ${token}`\r\n    }\r\n\r\n    const config: RequestInit = {\r\n      ...options,\r\n      headers,\r\n      credentials: 'include', // Important for cookies\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`${this.baseURL}${endpoint}`, config)\r\n      const data = await response.json()\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.message || 'Request failed')\r\n      }\r\n\r\n      return data\r\n    } catch (error) {\r\n      if (error instanceof Error) {\r\n        throw error\r\n      }\r\n      throw new Error('An unexpected error occurred')\r\n    }\r\n  }\r\n\r\n  async get<T>(endpoint: string, options?: RequestInit): Promise<ApiResponse<T>> {\r\n    return this.request<T>(endpoint, { ...options, method: 'GET' })\r\n  }\r\n\r\n  async post<T>(endpoint: string, body?: any, options?: RequestInit): Promise<ApiResponse<T>> {\r\n    return this.request<T>(endpoint, {\r\n      ...options,\r\n      method: 'POST',\r\n      body: body ? JSON.stringify(body) : undefined,\r\n    })\r\n  }\r\n\r\n  async put<T>(endpoint: string, body?: any, options?: RequestInit): Promise<ApiResponse<T>> {\r\n    return this.request<T>(endpoint, {\r\n      ...options,\r\n      method: 'PUT',\r\n      body: body ? JSON.stringify(body) : undefined,\r\n    })\r\n  }\r\n\r\n  async patch<T>(endpoint: string, body?: any, options?: RequestInit): Promise<ApiResponse<T>> {\r\n    return this.request<T>(endpoint, {\r\n      ...options,\r\n      method: 'PATCH',\r\n      body: body ? JSON.stringify(body) : undefined,\r\n    })\r\n  }\r\n\r\n  async delete<T>(endpoint: string, options?: RequestInit): Promise<ApiResponse<T>> {\r\n    return this.request<T>(endpoint, { ...options, method: 'DELETE' })\r\n  }\r\n}\r\n\r\nexport const apiClient = new ApiClient(API_BASE_URL)\r\n\r\n"],"names":[],"mappings":";;;;AAAA,MAAM,eAAe,oEAAmC;AASxD,MAAM;IACI,QAAe;IAEvB,YAAY,OAAe,CAAE;QAC3B,IAAI,CAAC,OAAO,GAAG;IACjB;IAEA,MAAc,QACZ,QAAgB,EAChB,UAAuB,CAAC,CAAC,EACA;QACzB,MAAM,QAAQ,sCAAgC,0BAAqC;QAEnF,MAAM,UAAuB;YAC3B,gBAAgB;YAChB,GAAG,QAAQ,OAAO;QACpB;QAEA;;QAIA,MAAM,SAAsB;YAC1B,GAAG,OAAO;YACV;YACA,aAAa;QACf;QAEA,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,GAAG,UAAU,EAAE;YAC3D,MAAM,OAAO,MAAM,SAAS,IAAI;YAEhC,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM,KAAK,OAAO,IAAI;YAClC;YAEA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,IAAI,iBAAiB,OAAO;gBAC1B,MAAM;YACR;YACA,MAAM,IAAI,MAAM;QAClB;IACF;IAEA,MAAM,IAAO,QAAgB,EAAE,OAAqB,EAA2B;QAC7E,OAAO,IAAI,CAAC,OAAO,CAAI,UAAU;YAAE,GAAG,OAAO;YAAE,QAAQ;QAAM;IAC/D;IAEA,MAAM,KAAQ,QAAgB,EAAE,IAAU,EAAE,OAAqB,EAA2B;QAC1F,OAAO,IAAI,CAAC,OAAO,CAAI,UAAU;YAC/B,GAAG,OAAO;YACV,QAAQ;YACR,MAAM,OAAO,KAAK,SAAS,CAAC,QAAQ;QACtC;IACF;IAEA,MAAM,IAAO,QAAgB,EAAE,IAAU,EAAE,OAAqB,EAA2B;QACzF,OAAO,IAAI,CAAC,OAAO,CAAI,UAAU;YAC/B,GAAG,OAAO;YACV,QAAQ;YACR,MAAM,OAAO,KAAK,SAAS,CAAC,QAAQ;QACtC;IACF;IAEA,MAAM,MAAS,QAAgB,EAAE,IAAU,EAAE,OAAqB,EAA2B;QAC3F,OAAO,IAAI,CAAC,OAAO,CAAI,UAAU;YAC/B,GAAG,OAAO;YACV,QAAQ;YACR,MAAM,OAAO,KAAK,SAAS,CAAC,QAAQ;QACtC;IACF;IAEA,MAAM,OAAU,QAAgB,EAAE,OAAqB,EAA2B;QAChF,OAAO,IAAI,CAAC,OAAO,CAAI,UAAU;YAAE,GAAG,OAAO;YAAE,QAAQ;QAAS;IAClE;AACF;AAEO,MAAM,YAAY,IAAI,UAAU"}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///D:/projectmanager/frontend/lib/api/auth.ts"],"sourcesContent":["import { apiClient } from '../api-client'\r\n\r\nexport interface LoginRequest {\r\n  email: string\r\n  password: string\r\n}\r\n\r\nexport interface RegisterRequest {\r\n  email: string\r\n  username: string\r\n  password: string\r\n}\r\n\r\nexport interface User {\r\n  _id: string\r\n  email: string\r\n  username: string\r\n  fullName?: string\r\n  avatar?: {\r\n    url: string\r\n    localPath: string\r\n  }\r\n  role?: string\r\n  isEmailVerified: boolean\r\n}\r\n\r\nexport interface AuthResponse {\r\n  user: User\r\n  accessToken: string\r\n  refreshToken: string\r\n}\r\n\r\nexport const authApi = {\r\n  login: async (data: LoginRequest) => {\r\n    const response = await apiClient.post<AuthResponse>('/auth/login', data)\r\n    return response.data\r\n  },\r\n\r\n  register: async (data: RegisterRequest) => {\r\n    const response = await apiClient.post<{ user: User }>('/auth/register', data)\r\n    return response.data\r\n  },\r\n\r\n  logout: async () => {\r\n    const response = await apiClient.post('/auth/logout')\r\n    return response.data\r\n  },\r\n\r\n  getCurrentUser: async () => {\r\n    const response = await apiClient.post<User>('/auth/current-user')\r\n    return response.data\r\n  },\r\n\r\n  forgotPassword: async (email: string) => {\r\n    const response = await apiClient.post('/auth/forgot-password', { email })\r\n    return response.data\r\n  },\r\n\r\n  resetPassword: async (resetToken: string, newPassword: string) => {\r\n    const response = await apiClient.post(`/auth/reset-password/${resetToken}`, {\r\n      newPassword,\r\n    })\r\n    return response.data\r\n  },\r\n\r\n  refreshToken: async () => {\r\n    const response = await apiClient.post<{ accessToken: string; refreshToken: string }>(\r\n      '/auth/refresh-token'\r\n    )\r\n    return response.data\r\n  },\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAgCO,MAAM,UAAU;IACrB,OAAO,OAAO;QACZ,MAAM,WAAW,MAAM,iIAAS,CAAC,IAAI,CAAe,eAAe;QACnE,OAAO,SAAS,IAAI;IACtB;IAEA,UAAU,OAAO;QACf,MAAM,WAAW,MAAM,iIAAS,CAAC,IAAI,CAAiB,kBAAkB;QACxE,OAAO,SAAS,IAAI;IACtB;IAEA,QAAQ;QACN,MAAM,WAAW,MAAM,iIAAS,CAAC,IAAI,CAAC;QACtC,OAAO,SAAS,IAAI;IACtB;IAEA,gBAAgB;QACd,MAAM,WAAW,MAAM,iIAAS,CAAC,IAAI,CAAO;QAC5C,OAAO,SAAS,IAAI;IACtB;IAEA,gBAAgB,OAAO;QACrB,MAAM,WAAW,MAAM,iIAAS,CAAC,IAAI,CAAC,yBAAyB;YAAE;QAAM;QACvE,OAAO,SAAS,IAAI;IACtB;IAEA,eAAe,OAAO,YAAoB;QACxC,MAAM,WAAW,MAAM,iIAAS,CAAC,IAAI,CAAC,CAAC,qBAAqB,EAAE,YAAY,EAAE;YAC1E;QACF;QACA,OAAO,SAAS,IAAI;IACtB;IAEA,cAAc;QACZ,MAAM,WAAW,MAAM,iIAAS,CAAC,IAAI,CACnC;QAEF,OAAO,SAAS,IAAI;IACtB;AACF"}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///D:/projectmanager/frontend/lib/auth-context.tsx"],"sourcesContent":["'use client'\n\nimport React, { createContext, useContext, useEffect, useState } from 'react'\nimport { authApi, type User as ApiUser } from './api/auth'\n\nexport interface User {\n  id: string\n  email: string\n  name: string\n  username: string\n  role: 'admin' | 'project_admin' | 'member'\n  avatar?: string\n}\n\ninterface AuthContextType {\n  user: User | null\n  isLoading: boolean\n  isLoggedIn: boolean\n  login: (email: string, password: string) => Promise<void>\n  register: (name: string, email: string, password: string, username: string) => Promise<void>\n  logout: () => Promise<void>\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\n\n// Helper to map API user to frontend user\nconst mapApiUserToUser = (apiUser: ApiUser): User => {\n  return {\n    id: apiUser._id,\n    email: apiUser.email,\n    name: apiUser.fullName || apiUser.username,\n    username: apiUser.username,\n    role: 'member', // Default role, actual role comes from project membership\n    avatar: apiUser.avatar?.url || `https://api.dicebear.com/7.x/avataaars/svg?seed=${apiUser.email}`,\n  }\n}\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n\n  // Check if user is logged in on mount\n  useEffect(() => {\n    const checkAuth = async () => {\n      const storedUser = localStorage.getItem('auth_user')\n      const token = localStorage.getItem('auth_token')\n      \n      if (storedUser && token) {\n        try {\n          // Verify token is still valid by fetching current user\n          const currentUser = await authApi.getCurrentUser()\n          const mappedUser = mapApiUserToUser(currentUser)\n          setUser(mappedUser)\n          localStorage.setItem('auth_user', JSON.stringify(mappedUser))\n        } catch (error) {\n          // Token invalid, clear storage\n          localStorage.removeItem('auth_user')\n          localStorage.removeItem('auth_token')\n          setUser(null)\n        }\n      }\n      setIsLoading(false)\n    }\n    \n    checkAuth()\n  }, [])\n\n  const login = async (email: string, password: string) => {\n    setIsLoading(true)\n    try {\n      const response = await authApi.login({ email, password })\n      \n      // Store token\n      localStorage.setItem('auth_token', response.accessToken)\n      \n      // Map and store user\n      const mappedUser = mapApiUserToUser(response.user)\n      setUser(mappedUser)\n      localStorage.setItem('auth_user', JSON.stringify(mappedUser))\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Login failed'\n      throw new Error(message)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const register = async (name: string, email: string, password: string, username: string) => {\n    setIsLoading(true)\n    try {\n      await authApi.register({ email, username, password })\n      \n      // Auto-login after successful registration\n      const loginResponse = await authApi.login({ email, password })\n      localStorage.setItem('auth_token', loginResponse.accessToken)\n      const loggedInUser = mapApiUserToUser(loginResponse.user)\n      setUser(loggedInUser)\n      localStorage.setItem('auth_user', JSON.stringify(loggedInUser))\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Registration failed'\n      throw new Error(message)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const logout = async () => {\n    try {\n      await authApi.logout()\n    } catch (error) {\n      // Continue with logout even if API call fails\n      console.error('Logout API call failed:', error)\n    } finally {\n      setUser(null)\n      localStorage.removeItem('auth_user')\n      localStorage.removeItem('auth_token')\n    }\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        isLoading,\n        isLoggedIn: !!user,\n        login,\n        register,\n        logout,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  )\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider')\n  }\n  return context\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAuBA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAE/D,0CAA0C;AAC1C,MAAM,mBAAmB,CAAC;IACxB,OAAO;QACL,IAAI,QAAQ,GAAG;QACf,OAAO,QAAQ,KAAK;QACpB,MAAM,QAAQ,QAAQ,IAAI,QAAQ,QAAQ;QAC1C,UAAU,QAAQ,QAAQ;QAC1B,MAAM;QACN,QAAQ,QAAQ,MAAM,EAAE,OAAO,CAAC,gDAAgD,EAAE,QAAQ,KAAK,EAAE;IACnG;AACF;AAEO,SAAS,aAAa,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,sCAAsC;IACtC,IAAA,kNAAS,EAAC;QACR,MAAM,YAAY;YAChB,MAAM,aAAa,aAAa,OAAO,CAAC;YACxC,MAAM,QAAQ,aAAa,OAAO,CAAC;YAEnC,IAAI,cAAc,OAAO;gBACvB,IAAI;oBACF,uDAAuD;oBACvD,MAAM,cAAc,MAAM,6HAAO,CAAC,cAAc;oBAChD,MAAM,aAAa,iBAAiB;oBACpC,QAAQ;oBACR,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;gBACnD,EAAE,OAAO,OAAO;oBACd,+BAA+B;oBAC/B,aAAa,UAAU,CAAC;oBACxB,aAAa,UAAU,CAAC;oBACxB,QAAQ;gBACV;YACF;YACA,aAAa;QACf;QAEA;IACF,GAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,OAAe;QAClC,aAAa;QACb,IAAI;YACF,MAAM,WAAW,MAAM,6HAAO,CAAC,KAAK,CAAC;gBAAE;gBAAO;YAAS;YAEvD,cAAc;YACd,aAAa,OAAO,CAAC,cAAc,SAAS,WAAW;YAEvD,qBAAqB;YACrB,MAAM,aAAa,iBAAiB,SAAS,IAAI;YACjD,QAAQ;YACR,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;QACnD,EAAE,OAAO,OAAO;YACd,MAAM,UAAU,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YACzD,MAAM,IAAI,MAAM;QAClB,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,WAAW,OAAO,MAAc,OAAe,UAAkB;QACrE,aAAa;QACb,IAAI;YACF,MAAM,6HAAO,CAAC,QAAQ,CAAC;gBAAE;gBAAO;gBAAU;YAAS;YAEnD,2CAA2C;YAC3C,MAAM,gBAAgB,MAAM,6HAAO,CAAC,KAAK,CAAC;gBAAE;gBAAO;YAAS;YAC5D,aAAa,OAAO,CAAC,cAAc,cAAc,WAAW;YAC5D,MAAM,eAAe,iBAAiB,cAAc,IAAI;YACxD,QAAQ;YACR,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;QACnD,EAAE,OAAO,OAAO;YACd,MAAM,UAAU,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YACzD,MAAM,IAAI,MAAM;QAClB,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,SAAS;QACb,IAAI;YACF,MAAM,6HAAO,CAAC,MAAM;QACtB,EAAE,OAAO,OAAO;YACd,8CAA8C;YAC9C,QAAQ,KAAK,CAAC,2BAA2B;QAC3C,SAAU;YACR,QAAQ;YACR,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;QAC1B;IACF;IAEA,qBACE,8OAAC,YAAY,QAAQ;QACnB,OAAO;YACL;YACA;YACA,YAAY,CAAC,CAAC;YACd;YACA;YACA;QACF;kBAEC;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 282, "column": 0}, "map": {"version":3,"sources":["file:///D:/projectmanager/frontend/lib/theme-context.tsx"],"sourcesContent":["'use client'\n\nimport { createContext, useContext, useEffect, useState } from 'react'\n\ntype Theme = 'light' | 'dark' | 'system'\n\ninterface ThemeContextType {\n  theme: Theme\n  setTheme: (theme: Theme) => void\n  isDark: boolean\n}\n\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined)\n\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\n  const [theme, setThemeState] = useState<Theme>('system')\n  const [isDark, setIsDark] = useState(false)\n  const [mounted, setMounted] = useState(false)\n\n  // Initialize theme from localStorage and system preference\n  useEffect(() => {\n    const savedTheme = (localStorage.getItem('theme') as Theme) || 'system'\n    setThemeState(savedTheme)\n    applyTheme(savedTheme)\n    setMounted(true)\n  }, [])\n\n  // Listen to system theme changes\n  useEffect(() => {\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)')\n    const handleChange = () => {\n      if (theme === 'system') {\n        applyTheme('system')\n      }\n    }\n    mediaQuery.addEventListener('change', handleChange)\n    return () => mediaQuery.removeEventListener('change', handleChange)\n  }, [theme])\n\n  const applyTheme = (newTheme: Theme) => {\n    const html = document.documentElement\n    let shouldBeDark = false\n\n    if (newTheme === 'dark') {\n      shouldBeDark = true\n    } else if (newTheme === 'light') {\n      shouldBeDark = false\n    } else {\n      shouldBeDark = window.matchMedia('(prefers-color-scheme: dark)').matches\n    }\n\n    if (shouldBeDark) {\n      html.classList.add('dark')\n    } else {\n      html.classList.remove('dark')\n    }\n\n    setIsDark(shouldBeDark)\n  }\n\n  const setTheme = (newTheme: Theme) => {\n    setThemeState(newTheme)\n    localStorage.setItem('theme', newTheme)\n    applyTheme(newTheme)\n  }\n\n  // Prevent hydration mismatch\n  if (!mounted) {\n    return children\n  }\n\n  return (\n    <ThemeContext.Provider value={{ theme, setTheme, isDark }}>\n      {children}\n    </ThemeContext.Provider>\n  )\n}\n\nexport function useTheme() {\n  const context = useContext(ThemeContext)\n  if (!context) {\n    throw new Error('useTheme must be used within ThemeProvider')\n  }\n  return context\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AAFA;;;AAYA,MAAM,6BAAe,IAAA,sNAAa,EAA+B;AAE1D,SAAS,cAAc,EAAE,QAAQ,EAAiC;IACvE,MAAM,CAAC,OAAO,cAAc,GAAG,IAAA,iNAAQ,EAAQ;IAC/C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,2DAA2D;IAC3D,IAAA,kNAAS,EAAC;QACR,MAAM,aAAa,AAAC,aAAa,OAAO,CAAC,YAAsB;QAC/D,cAAc;QACd,WAAW;QACX,WAAW;IACb,GAAG,EAAE;IAEL,iCAAiC;IACjC,IAAA,kNAAS,EAAC;QACR,MAAM,aAAa,OAAO,UAAU,CAAC;QACrC,MAAM,eAAe;YACnB,IAAI,UAAU,UAAU;gBACtB,WAAW;YACb;QACF;QACA,WAAW,gBAAgB,CAAC,UAAU;QACtC,OAAO,IAAM,WAAW,mBAAmB,CAAC,UAAU;IACxD,GAAG;QAAC;KAAM;IAEV,MAAM,aAAa,CAAC;QAClB,MAAM,OAAO,SAAS,eAAe;QACrC,IAAI,eAAe;QAEnB,IAAI,aAAa,QAAQ;YACvB,eAAe;QACjB,OAAO,IAAI,aAAa,SAAS;YAC/B,eAAe;QACjB,OAAO;YACL,eAAe,OAAO,UAAU,CAAC,gCAAgC,OAAO;QAC1E;QAEA,IAAI,cAAc;YAChB,KAAK,SAAS,CAAC,GAAG,CAAC;QACrB,OAAO;YACL,KAAK,SAAS,CAAC,MAAM,CAAC;QACxB;QAEA,UAAU;IACZ;IAEA,MAAM,WAAW,CAAC;QAChB,cAAc;QACd,aAAa,OAAO,CAAC,SAAS;QAC9B,WAAW;IACb;IAEA,6BAA6B;IAC7B,IAAI,CAAC,SAAS;QACZ,OAAO;IACT;IAEA,qBACE,8OAAC,aAAa,QAAQ;QAAC,OAAO;YAAE;YAAO;YAAU;QAAO;kBACrD;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}}]
}